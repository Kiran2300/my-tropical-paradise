"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = render;

var _fastLoops = require("fast-loops");

var _createSubscription = _interopRequireDefault(require("./connection/createSubscription"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function render(renderer, targetDocument) {
  if (!renderer.updateSubscription) {
    renderer.scoreIndex = {};
    renderer.nodes = {};
    renderer.updateSubscription = (0, _createSubscription["default"])(renderer, targetDocument);
    renderer.subscribe(renderer.updateSubscription); // simulate rendering to ensure all styles rendered prior to
    // calling FelaDOM.render are correctly injected as well

    (0, _fastLoops.objectEach)(renderer.cache, renderer._emitChange);
  }
}